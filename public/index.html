<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Pi Payment Test</title>
  <!-- Pi SDK Î∂àÎü¨Ïò§Í∏∞ -->
  <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
  <h1>‚úÖ Pi Payment Test Page</h1>
  <button onclick="testPayment()">üí∞ Test Pi Payment</button>

  <script>
    // Pi SDK Ï¥àÍ∏∞Ìôî (sandbox:true Íº≠ ÌïÑÏöî!)
    Pi.init({ version: "2.0", sandbox: true });

    async function testPayment() {
      try {
        const payment = await Pi.createPayment(
          {
            amount: 1,
            memo: "Test transaction",
            metadata: { purpose: "11-step-check" }
          },
          {
            onReadyForServerApproval: function(paymentId) {
              console.log("‚û°Ô∏è Ready for approval:", paymentId);
              alert("Step1: Ready for approval ‚úÖ");
            },
            onReadyForServerCompletion: function(paymentId, txid) {
              console.log("‚û°Ô∏è Payment completed:", paymentId, txid);
              alert("Step2: Payment completed ‚úÖ");
            },
            onCancel: function(paymentId) {
              console.log("‚û°Ô∏è Payment cancelled:", paymentId);
              alert("‚ùå Payment cancelled");
            },
            onError: function(error, payment) {
              console.error("‚û°Ô∏è Payment error:", error, payment);
              alert("‚ùå Payment error: " + error.message);
            }
          }
        );
      } catch (err) {
        console.error(err);
        alert("‚ùå Payment failed. JS error: " + err.message);
      }
    }
  </script>
</body>
</html>
